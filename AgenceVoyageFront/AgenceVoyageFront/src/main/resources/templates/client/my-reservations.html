<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Reservations</title>
    <link rel="stylesheet" href="/css/my-reservations.css">
</head>
<body>
<header>
    <nav class="main-nav">
        <a href="/" class="logo">TravelDreams</a>
        <div class="nav-links">
            <a href="/client/client-booking" class="nav-link">Make a Reservation</a>
            <button class="disconnect-button" onclick="window.location.href='/logout';">Logout</button>
        </div>
    </nav>
</header>

<main>
    <section>
        <h1 class="page-title">My Reservations</h1>

        <!-- Hotels Reservations -->
        <div id="hotel-reservations" class="reservation-section">
            <div class="toggle-button" onclick="toggleSection('hotel-reservations-list', this)">
                <h2>Hotel Reservations</h2>
                <span class="arrow">&#9654;</span>
            </div>
            <div class="reservation-list" id="hotel-reservations-list">
                <ul>
                    <li th:each="reservation : ${hotelReservations}">
                        <div class="reservation-card">
                            <h3 th:text="'Hotel ID: ' + ${reservation.hotelId}"></h3>
                            <p th:text="'Check-in: ' + ${reservation.checkInDate}"></p>
                            <p th:text="'Check-out: ' + ${reservation.checkOutDate}"></p>
                            <p th:text="'Price: ' + ${reservation.totalPrice} + ' MAD'"></p>
                            <p th:text="'Status: ' + ${reservation.status}"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Flight Reservations -->
        <div id="flight-reservations" class="reservation-section">
            <div class="toggle-button" onclick="toggleSection('flight-reservations-list', this)">
                <h2>Flight Reservations</h2>
                <span class="arrow">&#9654;</span>
            </div>
            <div class="reservation-list" id="flight-reservations-list">
                <ul>
                    <li th:each="reservation : ${flightReservations}">
                        <div class="reservation-card">
                            <h3 th:text="'Flight ID: ' + ${reservation.flightId}"></h3>
                            <p th:text="'Booking Date: ' + ${reservation.bookingDateTime}"></p>
                            <p th:text="'Price: ' + ${reservation.totalPrice} + ' MAD'"></p>
                            <p th:text="'Status: ' + ${reservation.status}"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Car Reservations -->
        <div id="car-reservations" class="reservation-section">
            <div class="toggle-button" onclick="toggleSection('car-reservations-list', this)">
                <h2>Car Reservations</h2>
                <span class="arrow">&#9654;</span>
            </div>
            <div class="reservation-list" id="car-reservations-list">
                <ul>
                    <li th:each="reservation : ${carReservations}">
                        <div class="reservation-card">
                            <h3 th:text="'Car ID: ' + ${reservation.carId}"></h3>
                            <p th:text="'Start Date: ' + ${reservation.rentalStartDate}"></p>
                            <p th:text="'End Date: ' + ${reservation.rentalEndDate}"></p>
                            <p th:text="'Price: ' + ${reservation.totalPrice} + ' MAD'"></p>
                            <p th:text="'Status: ' + ${reservation.status}"></p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </section>
</main>

<script>
    function toggleSection(sectionId, toggleButton) {
        const section = document.getElementById(sectionId);
        const arrow = toggleButton.querySelector('.arrow');
        if (section.style.display === 'none' || !section.style.display) {
            section.style.display = 'block';
            arrow.classList.remove('collapsed');
        } else {
            section.style.display = 'none';
            arrow.classList.add('collapsed');
        }
    }

    // Ensure all sections are hidden by default
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".reservation-list").forEach(section => {
            section.style.display = "none";
        });
    });
</script>
</body>
</html>
